Updated UI and fixed bugs.